{
  "permissions": {
    "allow": [
      "Bash(python:*)",
      "Bash(taskkill:*)",
      "Bash(dir:*)",
      "Bash(ls:*)",
      "Bash(find:*)",
      "Bash(cd:*)",
      "Bash(sqlite3:*)",
      "Bash(powershell -Command:*)",
      "Bash(pip install:*)",
      "Bash(start \"\" \"C:\\\\Users\\\\tt\\\\Documents\\\\Developpement logiciel\\\\DestriChiffrage\\\\data\\\\Devis_fournisseur\\\\Dispano\\\\M3248000120388.PDF\")",
      "Bash(start \"\" \"C:\\\\Users\\\\tt\\\\Documents\\\\Developpement logiciel\\\\DestriChiffrage\\\\data\\\\Devis_fournisseur\\\\Dispano\\\\M3248000121110.PDF\")",
      "Bash(tesseract:*)",
      "Bash(if [ -f \"C:\\\\Users\\\\tt\\\\AppData\\\\Local\\\\Temp\\\\poppler.zip\" ])",
      "Bash(else echo \"Not downloaded yet\")",
      "Bash(fi)",
      "Bash(tee:*)",
      "Bash(del:*)",
      "Bash(git init:*)",
      "Bash(git config:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git branch:*)",
      "Bash(git push:*)",
      "Bash(gh issue create:*)",
      "Bash(gh issue view:*)",
      "Bash(data\" \\\\\n            src/main.py\n\n# Cr√©er installateur avec Inno Setup\niscc installer_script.iss\n\\\\`\\\\`\\\\`\n\n### Option 2 : cx_Freeze\n**Avantages :**\n- Alternative √† PyInstaller\n- Bonne compatibilit√© Tkinter\n\n### Option 3 : py2exe \\(Windows only\\)\n**Avantages :**\n- Sp√©cialis√© Windows\n- L√©ger\n\n## üîÑ Syst√®me de mise √† jour propos√©\n\n### Architecture :\n1. **Fichier version.json** sur GitHub Releases\n2. **Module updater.py** dans l''application\n3. **V√©rification au d√©marrage** \\(une fois par jour maximum\\)\n4. **Interface graphique** pour notifier l''utilisateur\n\n### Workflow :\n\\\\`\\\\`\\\\`\nApp d√©marrage ‚Üí V√©rifier version distante ‚Üí Comparer avec version locale\n                                          ‚Üì\n                                  Nouvelle version ?\n                                  ‚Üì              ‚Üì\n                                OUI            NON\n                                  ‚Üì              ‚Üì\n                     Notifier utilisateur    Continuer\n                                  ‚Üì\n                     T√©l√©charger .exe\n                                  ‚Üì\n                     Installer et red√©marrer\n\\\\`\\\\`\\\\`\n\n## üí° Notes additionnelles\n\n### Consid√©rations importantes :\n1. **Taille de l''exe** : PyInstaller peut cr√©er des fichiers volumineux \\(50-100 MB\\)\n2. **Antivirus** : Les exe empaquet√©s sont parfois d√©tect√©s comme faux positifs\n3. **Permissions** : Installation dans Program Files n√©cessite droits administrateur\n4. **Donn√©es utilisateur** : S√©parer donn√©es app et donn√©es utilisateur \\(AppData\\)\n\n### Ressources :\n- [PyInstaller Documentation]\\(https://pyinstaller.org/\\)\n- [Inno Setup]\\(https://jrsoftware.org/isinfo.php\\)\n- [Auto-update examples]\\(https://github.com/topics/auto-update\\)\n\n### Structure post-installation :\n\\\\`\\\\`\\\\`\nC:\\\\Program Files\\\\DestriChiffrage\\\\\n‚îú‚îÄ‚îÄ DestriChiffrage.exe\n‚îú‚îÄ‚îÄ assets\\\\\n‚îÇ   ‚îú‚îÄ‚îÄ icon.ico\n‚îÇ   ‚îú‚îÄ‚îÄ pdf.png\n‚îÇ   ‚îî‚îÄ‚îÄ logo.png\n‚îî‚îÄ‚îÄ _internal\\\\          # D√©pendances PyInstaller\n\nC:\\\\Users\\\\%USERNAME%\\\\AppData\\\\Local\\\\DestriChiffrage\\\\\n‚îú‚îÄ‚îÄ data\\\\\n‚îÇ   ‚îú‚îÄ‚îÄ catalogue.db\n‚îÇ   ‚îú‚îÄ‚îÄ Fiches_techniques\\\\\n‚îÇ   ‚îî‚îÄ‚îÄ Devis_fournisseur\\\\\n‚îî‚îÄ‚îÄ config.ini\n\\\\`\\\\`\\\\`\nISSUE_EOF\n\\)\" --label \"enhancement\")",
      "Bash(wc:*)",
      "Bash(pip freeze:*)",
      "Bash(pyinstaller:*)",
      "Bash(start DestriChiffrage.exe)",
      "Bash(if [ -f \"C:/Program Files \\(x86\\)/Inno Setup 6/ISCC.exe\" ])",
      "Bash(then echo \"Inno Setup est installe\")",
      "Bash(else echo \"Inno Setup n''est PAS installe\")",
      "Bash(start python src/main.py)",
      "Bash(\"C:/Program Files \\(x86\\)/Inno Setup 6/ISCC.exe\" \"C:\\\\Users\\\\tt\\\\Documents\\\\Developpement logiciel\\\\DestriChiffrage\\\\installer.iss\")",
      "Bash(else echo \"Inno Setup n''est PAS installe - Il faut le telecharger\")",
      "Bash(\"C:/Program Files \\(x86\\)/Inno Setup 6/ISCC.exe\" installer.iss)",
      "Bash(\"C:/Program Files \\(x86\\)/Inno Setup 6/ISCC.exe\" installer_simple.iss)",
      "Bash(gh:*)",
      "Bash(build.bat:*)",
      "Bash(cmd /c build.bat)",
      "Bash(\"C:\\\\Program Files \\(x86\\)\\\\Inno Setup 6\\\\ISCC.exe\" installer_simple.iss)",
      "Bash(\"C:\\\\Program Files \\(x86\\)\\\\Inno Setup 6\\\\ISCC.exe\" \"C:\\\\Users\\\\tt\\\\Documents\\\\Developpement logiciel\\\\DestriChiffrage\\\\installer_simple.iss\")",
      "Bash(where:*)",
      "Bash(tasklist:*)",
      "Bash(python -m py_compile:*)",
      "Bash(gh issue edit:*)",
      "Bash(pip show:*)",
      "Bash(gh issue comment 11 --body \"$\\(cat <<''EOF''\n## üìù Compl√©ment - Import de la description\n\nLe champ **description** doit √©galement pouvoir √™tre import√© depuis le fichier DPGF CSV.\n\n### Modification du format d''import DPGF\n\nAjouter la colonne `DESCRIPTION` dans le fichier CSV d''import :\n\n```csv\nCODE;NIVEAU;DESIGNATION;DESCRIPTION;CATEGORIE;LARGEUR_MM;HAUTEUR_MM;CARACTERISTIQUES;UNITE;QUANTITE;LOCALISATION;NOTES\n1.1.1;4;Bloc-porte EI30;Bloc-porte coupe-feu 30 minutes, huisserie m√©tallique, finition laqu√©e blanc;COUPE-FEU;830;2040;EI30;U;5;Couloir RDC;\n```\n\n### T√¢ches suppl√©mentaires\n\n- [ ] Ajouter `DESCRIPTION` dans le mapping CSV de `import_dpgf_csv\\(\\)` \\(database.py\\)\n- [ ] Mettre √† jour `create_dpgf_template\\(\\)` pour inclure la colonne DESCRIPTION\n- [ ] Documenter la nouvelle colonne dans le README\nEOF\n\\)\")",
      "Bash(gh issue comment:*)",
      "Bash(gh issue close 12 --comment \"$\\(cat <<''EOF''\n## Corrections apportees \\(v1.3.1\\)\n\nToutes les fenetres sans `minsize` ont ete corrigees :\n\n### Fichiers modifies\n\n| Fichier | Classe | Avant | Apres |\n|---------|--------|-------|-------|\n| `dialogs.py` | AboutDialog | 480x440, pas de minsize | + minsize\\(460, 420\\) |\n| `update_dialog.py` | UpdateDialog | 500x500, pas de minsize | + minsize\\(480, 480\\) |\n| `update_dialog.py` | DownloadProgressDialog | 450x200, pas de minsize | + minsize\\(430, 180\\) |\n| `cart_export_dialog.py` | CartExportDialog | 550x450, pas de minsize | + minsize\\(530, 430\\) |\n| `cart_panel.py` | CartPanel | 700x500, pas de minsize | + minsize\\(650, 450\\) |\n| `product_search_dialog.py` | Dialogue quantite | 300x150 | 380x200 + minsize\\(350, 180\\) + bouton Annuler |\n| `main_window.py` | Dialogue vider BDD | 450x280, pas de minsize | + minsize\\(430, 260\\) |\n\n### Autres modifications\n\n- **README.md** : Ajout section \"Conventions UI\" avec tableau des tailles minimales\n- **version.py** : Mise a jour vers 1.3.1\n\n### Executable\n\nNouvel executable genere dans `dist/DestriChiffrage.exe`\nEOF\n\\)\")",
      "Bash(powershell -Command \"Stop-Process -Name DestriChiffrage -Force -ErrorAction SilentlyContinue; Start-Sleep -Seconds 2; Remove-Item ''C:\\\\Users\\\\tt\\\\Documents\\\\Developpement logiciel\\\\DestriChiffrage\\\\dist\\\\DestriChiffrage.exe'' -Force -ErrorAction SilentlyContinue\")",
      "Bash(gh issue close 13 --comment \"$\\(cat <<''EOF''\n## Correction appliquee \\(v1.3.2\\)\n\n### Modifications dans `src/database.py`\n\n1. **Fonction `create_import_template\\(\\)`** \\(ligne 747-757\\) :\n   - Ajout de la colonne `DESCRIPTION` dans les headers \\(apres DESIGNATION\\)\n   - Ajout d''exemples de description dans les lignes d''exemple :\n     - \"Porte interieure pleine en bois massif, finition laquee blanc\"\n     - \"Bloc-porte coupe-feu EI30, ame pleine, huisserie metal\"\n     - \"Porte acoustique haute performance, affaiblissement 35dB\"\n\n2. **Fonction `import_csv\\(\\)`** \\(ligne 773-789\\) :\n   - Ajout du mapping `''DESCRIPTION'': ''description''`\n\n### Nouveau format du template\n\n```csv\nCATEGORIE;SOUS-CATEGORIE;SOUS-CATEGORIE 2;SOUS-CATEGORIE 3;DESIGNATION;DESCRIPTION;HAUTEUR;LARGEUR;PRIX_UNITAIRE_HT;ARTICLE;FOURNISSEUR;CHANTIER;FICHE_TECHNIQUE;FICHIER_PDF\n```\n\n### Version\n\n- README.md : 1.3.1 -> 1.3.2\n- version.py : 1.3.1 -> 1.3.2\n\n### Executable\n\nNouvel executable genere dans `dist/DestriChiffrage.exe`\nEOF\n\\)\")",
      "Bash(powershell -Command \"Get-Process -Name DestriChiffrage -ErrorAction SilentlyContinue | Stop-Process -Force -ErrorAction SilentlyContinue; Start-Sleep -Seconds 1; Remove-Item ''C:\\\\Users\\\\tt\\\\Documents\\\\Developpement logiciel\\\\DestriChiffrage\\\\dist\\\\DestriChiffrage.exe'' -Force -ErrorAction SilentlyContinue\")",
      "Bash(gh release create v1.3.4 --title \"Version 1.3.4\" --notes \"$\\(cat <<''EOF''\n# Version 1.3.4\n\n## Nouveaut√©s\n\n- **Import depuis catalogue** : Nouveau bouton dans la vue Chiffrage DPGF pour cr√©er un article directement depuis un produit du catalogue avec liaison automatique\n- **Import DPGF dans vue chiffrage** : Bouton pour importer un fichier DPGF CSV dans le chantier courant\n\n## üì¶ Installation\n\n1. T√©l√©charger DestriChiffrage-Setup-1.3.4.exe\n2. Double-cliquer \\(accepter les droits administrateur\\)\n3. Suivre l''assistant d''installation\n4. L''application est install√©e !\n\n## üîÑ Mise √† Jour\n\nL''auto-updater d√©tectera automatiquement cette version depuis l''application.\n\n---\n\n**Taille**: ~27 MB\n**Plateforme**: Windows 10/11 64-bit\n**Droits admin**: Requis pour l''installation\nEOF\n\\)\")",
      "Bash(gh release upload:*)",
      "Bash(gh release view:*)",
      "Bash(powershell:*)",
      "Bash(python -m PyInstaller:*)",
      "Bash(dir \"C:\\\\Users\\\\tt\\\\Documents\\\\Developpement logiciel\\\\DestriChiffrage\\\\dist\\\\DestriChiffrage.exe\")",
      "Bash(gh release create v1.3.5 --title \"Version 1.3.5\" --notes \"$\\(cat <<''EOF''\n# Version 1.3.5\n\n## üì¶ Installation\n\n1. T√©l√©charger DestriChiffrage-Setup-1.3.5.exe\n2. Double-cliquer \\(accepter les droits administrateur\\)\n3. Suivre l''assistant d''installation\n4. L''application est install√©e !\n\n## üîÑ Mise √† Jour\n\nL''auto-updater d√©tectera automatiquement cette version depuis l''application.\n\n---\n\n**Taille**: ~27 MB\n**Plateforme**: Windows 10/11 64-bit\n**Droits admin**: Requis pour l''installation\nEOF\n\\)\")",
      "Bash(gh release:*)",
      "Bash(findstr:*)",
      "Bash(dir \"C:\\\\Users\\\\tt\\\\Documents\\\\Developpement logiciel\\\\DestriChiffrage\\\\installer_output\\\\DestriChiffrage-Setup-1.3.5.exe\")",
      "Bash(powershell -Command \"\\(Get-Item ''C:\\\\Users\\\\tt\\\\Documents\\\\Developpement logiciel\\\\DestriChiffrage\\\\dist\\\\DestriChiffrage.exe''\\).Length / 1MB\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nv1.3.5\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Skill(release)",
      "Bash(gh release create v1.4.0 --title \"Version 1.4.0\" --notes \"$\\(cat <<''EOF''\n# Version 1.4.0\n\n## üÜï Nouveaut√©s\n\n### Renommage \"Panier\" ‚Üí \"Devis rapide\"\n- Le bouton \"üõí Panier\" devient \"üìã Devis rapide\"\n- Tous les textes de l''interface ont √©t√© mis √† jour\n- La colonne \"Panier\" devient \"Devis\" dans le tableau\n\n### Export Odoo am√©lior√©\n- La description est maintenant sur la m√™me ligne que l''article\n- Si un champ \"Pr√©sentation\" est renseign√©, il est export√© sur une seconde ligne\n\n## üì¶ Installation\n\n1. T√©l√©charger DestriChiffrage-Setup-1.4.0.exe\n2. Double-cliquer \\(accepter les droits administrateur\\)\n3. Suivre l''assistant d''installation\n4. L''application est install√©e !\n\n## üîÑ Mise √† Jour\n\nL''auto-updater d√©tectera automatiquement cette version depuis l''application.\n\n---\n\n**Taille**: ~27 MB\n**Plateforme**: Windows 10/11 64-bit\n**Droits admin**: Requis pour l''installation\nEOF\n\\)\")",
      "Bash(timeout /t 2 /nobreak)",
      "Bash(cmd /c \"taskkill /IM DestriChiffrage.exe /F\")",
      "Skill(create-github-issue)",
      "Bash(start distDestriChiffrage.exe)",
      "Bash(start \"\" \"dist/DestriChiffrage.exe\")",
      "Bash(start \"\" \"C:\\\\Users\\\\tt\\\\Documents\\\\Developpement logiciel\\\\DestriChiffrage\\\\dist\\\\DestriChiffrage.exe\")",
      "Bash(gh.exe issue create:*)",
      "Bash(where gh:*)",
      "Bash(cmd /c \"where gh\")",
      "Bash(winget install:*)",
      "Bash(\"C:\\\\Program Files\\\\GitHub CLI\\\\gh.exe\" auth status)",
      "Bash(\"C:\\\\Program Files\\\\GitHub CLI\\\\gh.exe\" auth login)",
      "Bash(\"C:\\\\Program Files\\\\GitHub CLI\\\\gh.exe\" issue create --title \"Import DPGF : les niveaux 1 a 3 ne s''affichent pas dans la vue de chiffrage\" --body-file temp_issue_body.md --label \"bug\")",
      "Bash(\"C:\\\\Program Files\\\\GitHub CLI\\\\gh.exe\" issue create --title \"Chiffrage DPGF : prix manuel, fournitures additionnelles et spinbox pour temps MO\" --body-file temp_issue_body.md --label \"enhancement\")",
      "Bash(\"C:\\\\Program Files\\\\GitHub CLI\\\\gh.exe\" issue view 25 --repo florentdestribois/DestriChiffrage)",
      "Bash(\"C:\\\\Users\\\\tt\\\\AppData\\\\Local\\\\Microsoft\\\\WindowsApps\\\\python3.exe\" -m py_compile \"C:\\\\Users\\\\tt\\\\Documents\\\\Developpement logiciel\\\\DestriChiffrage\\\\src\\\\database.py\")",
      "Bash(cmd /c \"py -m py_compile \"\"C:\\\\Users\\\\tt\\\\Documents\\\\Developpement logiciel\\\\DestriChiffrage\\\\src\\\\database.py\"\" && echo database.py OK\")",
      "Bash(cmd /c \"cd /d \"\"C:\\\\Users\\\\tt\\\\Documents\\\\Developpement logiciel\\\\DestriChiffrage\"\" && py -m py_compile src\\\\database.py && echo database.py syntax OK\")",
      "Bash(cmd /c:*)",
      "Bash(py -m PyInstaller:*)",
      "Bash(cmd.exe /c \"cd /d C:\\\\Users\\\\tt\\\\Documents\\\\Developpement logiciel\\\\DestriChiffrage && py -m PyInstaller DestriChiffrage.spec --noconfirm\":*)",
      "Bash(cmd.exe /c \"cd /d C:\\\\Users\\\\tt\\\\Documents\\\\Developpement logiciel\\\\DestriChiffrage && py -m PyInstaller DestriChiffrage.spec --noconfirm && echo BUILD_SUCCESS || echo BUILD_FAILED\")",
      "Bash(\"C:\\\\Program Files\\\\GitHub CLI\\\\gh.exe\" issue create:*)",
      "Bash(cmd.exe /c \"where pyinstaller 2>&1\")",
      "Bash(cmd.exe /c \"py --version\")",
      "Bash(cmd.exe /c \"C:\\\\Users\\\\tt\\\\Documents\\\\Developpement logiciel\\\\DestriChiffrage\\\\build_now.bat\")",
      "Bash(\"C:\\\\Program Files\\\\GitHub CLI\\\\gh.exe\" issue create --repo florentdestribois/DestriChiffrage --title \"Filtres de recherche : produits avec fiche technique et/ou devis fournisseur\" --label \"enhancement\" --body \"## üìã Description\n\nAjout de filtres de recherche suppl√©mentaires permettant de filtrer les produits selon la pr√©sence ou non de documents associ√©s \\(fiche technique et devis fournisseur\\).\n\nCette fonctionnalit√© doit √™tre disponible dans :\n- **La fen√™tre principale** \\(\\\\`main_window.py\\\\`\\) - recherche globale des produits\n- **La fen√™tre de recherche de produit** \\(\\\\`product_search_dialog.py\\\\`\\) - dialog de s√©lection de produit\n\n## üéØ Objectif\n\nPermettre √† l''utilisateur de :\n1. **Filtrer les produits ayant une fiche technique** - Utile pour trouver rapidement les produits document√©s\n2. **Filtrer les produits ayant un devis fournisseur** - Utile pour identifier les produits avec tarification valid√©e\n\nCes filtres s''ajouteront aux filtres existants \\(cat√©gorie, sous-cat√©gories, dimensions, fournisseur\\) et pourront √™tre combin√©s entre eux.\n\n## üìÅ Fichiers concern√©s\n\n- \\\\`src/ui/main_window.py\\\\` - Ajouter les checkboxes/filtres dans la barre de recherche\n- \\\\`src/ui/product_search_dialog.py\\\\` - Ajouter les filtres dans \\\\`ProductSearchDialog\\\\` et \\\\`MultiProductSearchDialog\\\\`\n- \\\\`src/database.py\\\\` - Modifier \\\\`search_produits\\(\\)\\\\` pour supporter les nouveaux param√®tres de filtre\n\n## ‚úÖ T√¢ches\n\n### Base de donn√©es\n- [ ] Modifier la fonction \\\\`search_produits\\(\\)\\\\` dans \\\\`database.py\\\\` pour accepter les nouveaux param√®tres :\n  - \\\\`has_fiche_technique: bool = None\\\\` - Filtrer selon pr√©sence de fiche technique\n  - \\\\`has_devis_fournisseur: bool = None\\\\` - Filtrer selon pr√©sence de devis fournisseur\n- [ ] Ajouter les conditions SQL appropri√©es \\(\\\\`fiche_technique IS NOT NULL AND fiche_technique != ''''\\\\`\\)\n\n### Fen√™tre principale \\(\\\\`main_window.py\\\\`\\)\n- [ ] Ajouter deux checkboxes dans la zone de filtres :\n  - \"\"Avec fiche technique\"\"\n  - \"\"Avec devis fournisseur\"\"\n- [ ] Connecter ces filtres √† la fonction \\\\`on_search\\(\\)\\\\`\n- [ ] S''assurer que \\\\`clear_search\\(\\)\\\\` r√©initialise ces filtres\n\n### Dialog de recherche \\(\\\\`product_search_dialog.py\\\\`\\)\n- [ ] Ajouter les m√™mes filtres dans \\\\`ProductSearchDialog\\\\`\n- [ ] Ajouter les m√™mes filtres dans \\\\`MultiProductSearchDialog\\\\`\n- [ ] Connecter √† \\\\`_on_search\\(\\)\\\\` dans les deux classes\n\n### Tests et validation\n- [ ] Tester les filtres individuellement\n- [ ] Tester la combinaison des filtres avec les filtres existants\n- [ ] V√©rifier le comportement avec \\\\`clear_search\\(\\)\\\\`\n\n## üè∑Ô∏è Labels sugg√©r√©s\n- \\\\`enhancement\\\\`\n- \\\\`ui\\\\`\n- \\\\`priority: medium\\\\`\n\n## üí° Notes additionnelles\n\n### Colonnes existantes dans la table \\\\`produits\\\\`\n- \\\\`fiche_technique\\\\` - Chemin vers le fichier PDF de la fiche technique \\(peut √™tre NULL ou vide\\)\n- \\\\`devis_fournisseur\\\\` - Chemin vers le fichier PDF du devis fournisseur \\(peut √™tre NULL ou vide\\)\n\n### Suggestion d''impl√©mentation UI\nLes checkboxes pourraient √™tre plac√©es :\n- Dans la fen√™tre principale : √† c√¥t√© des filtres de fournisseur\n- Dans les dialogs : sous les filtres de cat√©gorie existants\n\n### Exemple de modification SQL\n\\\\`\\\\`\\\\`python\nif has_fiche_technique:\n    query += \"\" AND fiche_technique IS NOT NULL AND fiche_technique != ''''\"\"\nif has_devis_fournisseur:\n    query += \"\" AND devis_fournisseur IS NOT NULL AND devis_fournisseur != ''''\"\"\n\\\\`\\\\`\\\\`\")"
    ]
  }
}
